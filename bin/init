[ -n "$_init_" ] && return
_init_=1

prog=${0##*/}
prog=${prog%.*}

#path=${path:-.}

#   basedir
#    |   |
# path/$prog/bin
#           /log

rx='^(.+)/bin$'
if [[ ${path:-.} =~ $rx ]]
then
  basedir=${BASH_REMATCH[1]}
  bindir=$basedir/bin
else
  echo could not find bindir
  exit 1
fi

dbdir=$basedir/db
blkdir=$dbdir/blocked

for dir in $dbdir $logdir $blkdir
do
  [ -d $dir ] || mkdir -p $dir
done

hostname=$(hostname)
hostname=${hostname%%.*}
