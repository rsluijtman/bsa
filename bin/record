[ -n "$_record_" ] && return
_record_=1

record_block(){
  address=$1
  [ -d "$blkdir" ] || { echo no blkdir ; exit 1 ; }
  touch $blkdir/$address
  log recording block $address
}

# addr: ip address
# tag:  for not unique entry, sshpid, or empty, unique tag will be generated
record_noted(){
  address=$1
  tag=$2
  dir=$dbdir/noted/$address
  [ -d $dir ] || mkdir -p $dir
  while [ -z "$tag" ]
  do
    tst=r$RANDOM
    [ -f $dir/$tst ] && tag=$tst
  done
  touch $dir/$tag 
  log recording $address $tag
}

remove_record(){
  address=$1
  [ -z "$address" ] && { log empty address ; exit 1 ; }
  [ -d "$ntdir/$address" ] || { log no ntdir/address ; exit 1 ; }
  rm -r $ntdir/$address || log "rm $address failed"
  log rm $ntdir/$address
}

